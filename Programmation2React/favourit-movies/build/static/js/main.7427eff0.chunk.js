(this["webpackJsonpfavourit-movies"]=this["webpackJsonpfavourit-movies"]||[]).push([[0],{33:function(e,t,a){e.exports=a(49)},38:function(e,t,a){},39:function(e,t,a){},46:function(e,t,a){e.exports=a.p+"static/media/404.621e8f32.jpg"},49:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(20),l=a.n(o),s=(a(38),a(39),a(5)),c=a(9),i=a.n(c),u=a(19),m=a(10),d=a(11),h=a(13),p=a(12),v=a(16),E=a(54),f=a(7),y=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).state={},r}return Object(d.a)(a,[{key:"render",value:function(){return console.log(this.props.movieData),n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{className:"col-2 mb-2"},n.a.createElement(E.a,{className:"h-100 bg-muted"},n.a.createElement(E.a.Body,{className:"text-center"},n.a.createElement(v.b,{to:"Movies/"+this.props.title+"?id="+this.props.movieData.id},n.a.createElement("h5",null,this.props.title)),n.a.createElement("h6",null,this.props.movieData.director),n.a.createElement("h6",null,this.props.movieData.year)),n.a.createElement(v.b,{to:"Movies/"+this.props.title+"?id="+this.props.movieData.id},n.a.createElement(E.a.Img,{variant:"top",src:this.props.movieData.picture})))))}}]),a}(n.a.Component),b=a(21),I=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).state={data:[]},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3001/movies");case 3:return t=e.sent,e.next=6,t.json();case 6:if(a=e.sent,this.setState({data:a}),t.ok){e.next=10;break}throw Error(t.statusText);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,null,this.state.data.map((function(e,t){return n.a.createElement(y,{title:e.title,movieData:e,id:t+1})}))))}}]),a}(n.a.Component),g=function(e){Object(h.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(m.a)(this,r),(a=t.call(this,e)).state={},a}return Object(d.a)(r,[{key:"render",value:function(){return n.a.createElement("img",{src:a(46),alt:"404",width:"100%"})}}]),r}(n.a.Component),w=a(18),x=a(24),j=a(53),O=a(52),k=a(55),B=a(22),C=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).state={picture:"",data:{title:"",year:"",picture:"",director:"",writers:["","",""],stars:["","",""]},setErrors:{}},r.handlePicture=r.handlePicture.bind(Object(w.a)(r)),r.handleSave=r.handleSave.bind(Object(w.a)(r)),r.editMovie=r.editMovie.bind(Object(w.a)(r)),r.removeMovie=r.removeMovie.bind(Object(w.a)(r)),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.setState({movieID:this.props.location.search.substring(4,this.props.location.search.length)});case 3:return e.next=5,console.log(this.state.movieID);case 5:return e.next=7,fetch("http://localhost:3001/movies/"+this.state.movieID);case 7:return t=e.sent,e.next=10,t.json();case 10:if(a=e.sent,this.setState({data:a}),console.log(this.state.data),t.ok){e.next=15;break}throw Error(t.statusText);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(e){e.preventDefault();var t=document.getElementById("movieTitle").value,a=document.getElementById("movieBanner").value,r=document.getElementById("director").value,n=document.getElementById("year").value,o=document.getElementById("writers1").value,l=document.getElementById("writers2").value,s=document.getElementById("writers3").value,c=document.getElementById("stars1").value,i=document.getElementById("stars2").value,u=document.getElementById("stars3").value;this.formIsValid(t,a,r,n,o,c)&&this.editMovie(t,n,a,r,o,l,s,c,i,u)}},{key:"formIsValid",value:function(e,t,a,r,n,o){var l={};return e||(l.title="The title is required"),t||(l.picture="Movie URL banner is required"),a||(l.director="The director's name is required"),r||(l.year="The release year of the movie is required"),n||(l.writer1="You have to enter at least one writer"),o||(l.stars1="You have to enter at least one movie star"),this.setState({setErrors:l}),0===Object.keys(l).length}},{key:"editMovie",value:function(){var e=Object(u.a)(i.a.mark((function e(t,a,r,n,o,l,s,c,u,m){var d,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3001/movies/"+this.state.movieID,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:this.state.movieID,title:t,year:a,picture:r,director:n,writers:[o,l,s],stars:[c,u,m]})});case 3:if(!(d=e.sent).ok){e.next=11;break}return e.next=7,d.json();case 7:return h=e.sent,this.props.history.push("/"),B.a.success(t+" added to my favourite movies!"),e.abrupt("return",h);case 11:throw new Error("Request failed!");case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(t,a,r,n,o,l,s,c,i,u){return e.apply(this,arguments)}}()},{key:"handlePicture",value:function(e){var t=document.getElementById("movieBanner").value;this.setState({picture:t})}},{key:"removeMovie",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3001/movies/"+this.state.movieID,{method:"delete"});case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:return a=e.sent,console.log("DELETION!"),this.props.history.push("/"),B.a.error("DELETION OF THE MOVIE"),e.abrupt("return",a);case 12:throw new Error("Request failed!");case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,{className:"mt-5"},n.a.createElement(j.a,null,n.a.createElement(j.a.Group,{as:b.a,controlId:"movieID"},n.a.createElement(j.a.Group,{as:f.a,controlId:"movieTitle"},n.a.createElement(j.a.Label,null,"Movie Title"),n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.title})),n.a.createElement(j.a.Group,{as:f.a,controlId:"year"},n.a.createElement(j.a.Label,null,"Movie's release year"),n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.year})),n.a.createElement(j.a.Group,{as:f.a,controlId:"director"},n.a.createElement(j.a.Label,null,"Director's name"),n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.director}))),n.a.createElement(j.a.Group,{controlId:"movieBanner"},n.a.createElement(j.a.Label,null,"URL of the movie's banner"),n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.picture,onBlur:this.handlePicture}),""!==this.state.picture&&n.a.createElement(O.a,{src:this.state.picture,rounded:!0})),n.a.createElement(j.a.Label,null,"Writers"),n.a.createElement(j.a.Group,{as:b.a,controlId:"writers"},n.a.createElement(j.a.Group,{as:f.a,controlId:"writers1"},n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.writers[0]})),n.a.createElement(j.a.Group,{as:f.a,controlId:"writers2"},n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.writers[1]})),n.a.createElement(j.a.Group,{as:f.a,controlId:"writers3"},n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.writers[2]}))),n.a.createElement(j.a.Label,null,"Stars"),n.a.createElement(j.a.Group,{as:b.a,controlId:"stars"},n.a.createElement(j.a.Group,{as:f.a,controlId:"stars1"},n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.stars[0]})),n.a.createElement(j.a.Group,{as:f.a,controlId:"stars2"},n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.stars[1]})),n.a.createElement(j.a.Group,{as:f.a,controlId:"stars3"},n.a.createElement(j.a.Control,{type:"text",defaultValue:this.state.data.stars[2]}))),n.a.createElement(k.a,{variant:"primary",type:"submit",onClick:this.handleSave},"Save")),n.a.createElement("p",{className:"btn btn-danger mt-1",onClick:this.removeMovie},"Delete the movie")))}}]),a}(n.a.Component),M=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).state={},r}return Object(d.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(v.b,{to:"/AddMovie",className:"btn btn-primary"},"Add a movie"))}}]),a}(n.a.Component),D=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(v.b,{to:"/",className:"btn btn-primary"},"Return to my favourite movies"))}}]),a}(n.a.Component),G=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).state={picture:"",setErrors:{}},r.handleSave=r.handleSave.bind(Object(w.a)(r)),r.handlePicture=r.handlePicture.bind(Object(w.a)(r)),r}return Object(d.a)(a,[{key:"saveMovie",value:function(){var e=Object(u.a)(i.a.mark((function e(t,a,r,n,o,l,s,c,u,m){var d,h,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getID();case 3:return d=e.sent,e.next=6,fetch("http://localhost:3001/movies/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d,title:t,year:a,picture:r,director:n,writers:[o,l,s],stars:[c,u,m]})});case 6:if(!(h=e.sent).ok){e.next=14;break}return e.next=10,h.json();case 10:return p=e.sent,this.props.history.push("/"),B.a.success(t+" added to my favourite movies!"),e.abrupt("return",p);case 14:throw new Error("Request failed!");case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t,a,r,n,o,l,s,c,i,u){return e.apply(this,arguments)}}()},{key:"formIsValid",value:function(e,t,a,r,n,o){var l={};return e||(l.title="The title is required"),t||(l.picture="Movie URL banner is required"),a||(l.director="The director's name is required"),r||(l.year="The release year of the movie is required"),n||(l.writer1="You have to enter at least one writer"),o||(l.stars1="You have to enter at least one movie star"),this.setState({setErrors:l}),0===Object.keys(l).length}},{key:"getID",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=0,e.next=4,fetch("http://localhost:3001/movies");case 4:return a=e.sent,e.next=7,a.json();case 7:for(r=e.sent,n=0;n<r.length;n++)r[n].id>t&&(t=r[n].id);if(a.ok){e.next=11;break}throw Error(a.statusText);case 11:return e.abrupt("return",t+1);case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(e){e.preventDefault();var t=document.getElementById("movieTitle").value,a=document.getElementById("movieBanner").value,r=document.getElementById("director").value,n=document.getElementById("year").value,o=document.getElementById("writers1").value,l=document.getElementById("writers2").value,s=document.getElementById("writers3").value,c=document.getElementById("stars1").value,i=document.getElementById("stars2").value,u=document.getElementById("stars3").value;this.formIsValid(t,a,r,n,o,c)&&this.saveMovie(t,n,a,r,o,l,s,c,i,u)}},{key:"handlePicture",value:function(e){var t=document.getElementById("movieBanner").value;this.setState({picture:t})}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,null,n.a.createElement("h3",null,"Add new Movie"),n.a.createElement(j.a,null,n.a.createElement(j.a.Group,{as:b.a,controlId:"movieID"},n.a.createElement(j.a.Group,{as:f.a,controlId:"movieTitle"},n.a.createElement(j.a.Label,null,"Movie Title"),n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter the movie's title"})),n.a.createElement(j.a.Group,{as:f.a,controlId:"year"},n.a.createElement(j.a.Label,null,"Movie's release year"),n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter the year the movie was released"})),n.a.createElement(j.a.Group,{as:f.a,controlId:"director"},n.a.createElement(j.a.Label,null,"Director's name"),n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter the director's name"}))),n.a.createElement(j.a.Group,{controlId:"movieBanner"},n.a.createElement(j.a.Label,null,"URL of the movie's banner"),n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter a valid url",onBlur:this.handlePicture})),""!==this.state.picture&&n.a.createElement(O.a,{src:this.state.picture,rounded:!0}),n.a.createElement(j.a.Label,null,"Writers"),n.a.createElement(j.a.Group,{as:b.a,controlId:"writers"},n.a.createElement(j.a.Group,{as:f.a,controlId:"writers1"},n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter the writer's name"})),n.a.createElement(j.a.Group,{as:f.a,controlId:"writers2"},n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter the writer's name"})),n.a.createElement(j.a.Group,{as:f.a,controlId:"writers3"},n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter the writer's name"}))),n.a.createElement(j.a.Label,null,"Stars"),n.a.createElement(j.a.Group,{as:b.a,controlId:"stars"},n.a.createElement(j.a.Group,{as:f.a,controlId:"stars1"},n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter the star's name"})),n.a.createElement(j.a.Group,{as:f.a,controlId:"stars2"},n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter the star's name"})),n.a.createElement(j.a.Group,{as:f.a,controlId:"stars3"},n.a.createElement(j.a.Control,{type:"text",placeholder:"Enter the star's name"}))),n.a.createElement(k.a,{variant:"primary",type:"submit",onClick:this.handleSave},"Save"))))}}]),a}(n.a.Component);var S=function(){var e=Object(s.f)();return console.log(e.pathname),n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,{fluid:!0},n.a.createElement(b.a,null,n.a.createElement(f.a,{xs:!0,xl:"12",className:"d-flex justify-content-between align-items-center"},n.a.createElement("div",null,n.a.createElement("h1",null,"My favourite movies")),n.a.createElement("div",null,"/AddMovie"!==e.pathname&&!e.pathname.startsWith("/Movies")&&n.a.createElement(M,null),"/"!==e.pathname&&n.a.createElement(D,null)))),n.a.createElement(s.c,null,n.a.createElement(s.a,{path:"/",exact:!0,component:I}),n.a.createElement(s.a,{path:"/Movies/:id",component:C}),n.a.createElement(s.a,{path:"/AddMovie",component:G}),n.a.createElement(s.a,{component:g}))))};a(48),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(v.a,null,n.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.7427eff0.chunk.js.map